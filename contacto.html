<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OrderFlow - Contacto</title>
  <link rel="stylesheet" href="css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="faviconorderflow.png">
</head>

<body>
  <header>
    <div class="logo" style="font-family: 'Playfair Display', serif;">OrderFlow</div>
    <input type="checkbox" id="menu-toggle" style="display:none;">
    <label for="menu-toggle" class="menu-icon">
      <span></span>
      <span></span>
      <span></span>
    </label>
    <nav>
      <a href="index.html" style="font-family: 'Playfair Display', serif;">Inicio</a>
      <a href="sobre-nosotros.html" style="font-family: 'Playfair Display', serif;">Sobre Nosotros</a>
      <a href="servicios.html" style="font-family: 'Playfair Display', serif;">Servicios</a>
      <a href="analisis-negocio.html" style="font-family: 'Playfair Display', serif;">Diagnóstico</a>
      <a href="contacto.html" class="active" style="font-family: 'Playfair Display', serif;">Contacto</a>
    </nav>
  </header>

  <main>
    <section class="content">
      <h1 style="font-family: 'Playfair Display', serif; margin-bottom:32px;">Contacto</h1>
      <p style="max-width:600px; margin:20px auto; padding:0 5%; line-height:1.6; margin-bottom:24px;">Rellena el
        formulario y nos pondremos en contacto contigo.</p>

      <form id="contact-form">
        <label>Nombre *</label>
        <input id="nombre" name="nombre" placeholder="" required>
        <label>Tipo de negocio *</label>
        <select id="negocio" name="negocio" required
          style="width:100%; padding:10px; margin-bottom:10px; border-radius:5px; border:1px solid #ccc;"
          placeholder="Selecciona una opción" required>
          <option value="" disabled selected>Selecciona una opción</option>
          <option value="peluqueria">Peluquería</option>
          <option value="clinica">Clínica</option>
          <option value="restaurante">Restaurante</option>
          <option value="inmobiliaria">Inmobiliaria</option>
          <option value="otros">Otro</option>
        </select>
        <label>Email *</label>
        <input id="email" name="email" type="email" placeholder="" required>

        <button type="submit">Enviar</button>
      </form>
      <!-- Mensaje de estado (oculto por defecto) -->
      <div id="form-status" class="form-status" role="status" aria-live="polite"
        style="display:none; text-align:center; margin-top:12px; padding:10px; border-radius:6px;"></div>
      <div class="or-line"><span>O contáctanos por</span></div>
      <p class="contact-email"><a href="mailto:orderflow.team@gmail.com">orderflow.team@gmail.com</a></p>
    </section>
  </main>

  <footer
    style="background:#000; color:white; text-align:center; padding:20px; margin-top:0; position:static; left:0; bottom:0; width:100%;">
    <p style="margin:0;">© 2025 OrderFlow. Todos los derechos reservados.</p>
  </footer>
  <style>
    .menu-icon {
      display: none;
      flex-direction: column;
      cursor: pointer;
      width: 32px;
      height: 32px;
      justify-content: center;
      align-items: center;
      margin-left: 20px;
      z-index: 101;
    }

    .menu-icon span {
      height: 4px;
      width: 28px;
      background: white;
      margin: 4px 0;
      border-radius: 2px;
      display: block;
      transition: 0.3s;
    }

    @media (max-width: 600px) {
      nav {
        position: absolute;
        top: 60px;
        left: 0;
        width: 100vw;
        background: #000;
        flex-direction: column;
        align-items: flex-start;
        padding: 20px 0 10px 30px;
        display: none;
        z-index: 100;
      }

      header {
        flex-direction: row;
        padding: 15px 20px;
      }

      .menu-icon {
        display: flex;
      }

      #menu-toggle:checked+.menu-icon+nav {
        display: flex;
      }

      nav a {
        margin: 10px 0;
        padding: 10px 0;
        width: 100%;
        border-radius: 0;
      }
    }

    .form-status {
      font-size: 0.95rem;
    }

    .form-status.success {
      background: #0b6623;
      color: #fff;
    }

    .form-status.error {
      background: #6b0b0b;
      color: #fff;
    }
  </style>

  <script>
    document.getElementById("contact-form").addEventListener("submit", async function (e) {
      e.preventDefault();

      const form = e.target;
      const submitBtn = form.querySelector('button[type="submit"]');

      const originalText = submitBtn.textContent; // Guardar texto original
      const originalBg = submitBtn.style.backgroundColor || '#007BFF'; // Guardar color original
      const originalColor = submitBtn.style.color || '#fff';

      const data = {
        nombre: document.getElementById("nombre").value,
        negocio: document.getElementById("negocio").value,
        email: document.getElementById("email").value,
      };

      // Estado de envío
      submitBtn.disabled = true;
      submitBtn.textContent = 'Enviando...';
      submitBtn.style.backgroundColor = '#6c757d'; // gris para "procesando"
      submitBtn.style.color = '#fff';

      try {
        const response = await fetch("http://localhost:5678/webhook/contacto-orderflow", {
          method: "POST",
          mode: "cors",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });

        let result = {};
        try { result = await response.json(); } catch (e) { /* ignore */ }

        if (response.ok && (result.success === undefined || result.success)) {
          submitBtn.textContent = '¡Enviado!';
          submitBtn.style.backgroundColor = '#28a745'; // verde
          submitBtn.style.color = '#fff';
          form.reset();
        } else {
          submitBtn.textContent = 'Error. Intenta de nuevo';
          submitBtn.style.backgroundColor = '#dc3545'; // rojo
          submitBtn.style.color = '#fff';
          console.error('Respuesta no OK:', response.status, result);
        }

      } catch (error) {
        console.error("Error al enviar:", error);
        submitBtn.textContent = 'Error. Intenta de nuevo';
        submitBtn.style.backgroundColor = '#dc3545'; // rojo
        submitBtn.style.color = '#fff';
      } finally {
        // Volver al estado original después de 3 segundos
        setTimeout(() => {
          submitBtn.disabled = false;
          submitBtn.textContent = originalText;
          submitBtn.style.backgroundColor = originalBg;
          submitBtn.style.color = originalColor;
        }, 3000);
      }
    });
  </script>
  <script>
    window.CHATBOT_ENDPOINT = "http://localhost:5678/webhook-test/contacto-orderflow";
  </script>

  <script src="https://orderflowteam.github.io/OrderFlow/chat-widget.js"></script>

</body>

</html>